/**
 * Created by zx on 17-8-14.
 */
// 工资-折线图

// var dct = {'西安': {'1-3': [12, 128, 67, 16, 3, 1, 2, 12], '3-5': [1, 31, 63, 52, 4, 2, 5, 10], '1': [39, 155, 46, 14, 4, 2, 6, 5], '5-10': [0, 2, 11, 12, 13, 1, 4, 3]}, '杭州': {'1-3': [1, 14, 40, 48, 28, 11, 10, 19], '3-5': [0, 2, 9, 6, 6, 12, 12, 11], '1': [1, 23, 36, 28, 8, 6, 3, 13], '5-10': [0, 0, 0, 2, 2, 0, 4, 2]}, '北京': {'1-3': [0, 34, 116, 192, 174, 102, 137, 184], '3-5': [0, 0, 8, 47, 48, 43, 110, 78], '10+': [0, 0, 0, 0, 0, 0, 0, 1], '1': [3, 70, 79, 88, 76, 20, 29, 82], '5-10': [0, 0, 0, 1, 8, 5, 21, 9]}, '广州': {'1-3': [0, 20, 44, 34, 21, 3, 3, 15], '3-5': [0, 1, 9, 10, 11, 3, 7, 5], '1': [2, 43, 23, 15, 6, 1, 0, 15], '5-10': [0, 0, 0, 0, 3, 2, 3, 1]}, '上海': {'1-3': [0, 13, 100, 150, 137, 44, 57, 156], '3-5': [0, 0, 9, 31, 55, 37, 52, 45], '10+': [0, 0, 0, 0, 0, 1, 0, 1], '1': [3, 64, 74, 69, 29, 9, 18, 50], '5-10': [0, 0, 1, 2, 3, 1, 13, 16]}, '天津': {'1-3': [1, 52, 28, 19, 5, 0, 1, 4], '3-5': [0, 6, 23, 12, 5, 6, 1, 4], '1': [22, 76, 24, 7, 0, 1, 0, 1], '5-10': [0, 0, 1, 6, 2, 0, 0, 2]}, '成都': {'1-3': [13, 226, 189, 83, 23, 3, 10, 33], '3-5': [0, 42, 95, 122, 42, 10, 19, 22], '1': [103, 352, 124, 56, 17, 4, 12, 25], '5-10': [0, 3, 14, 21, 14, 5, 16, 4]}, '深圳': {'1-3': [0, 12, 31, 62, 56, 20, 18, 55], '3-5': [0, 0, 10, 12, 18, 11, 26, 20], '10+': [0, 0, 0, 0, 0, 0, 1, 1], '1': [2, 24, 36, 30, 17, 2, 3, 19], '5-10': [0, 0, 1, 1, 4, 1, 5, 2]}, '南京': {'1-3': [3, 133, 165, 81, 23, 8, 12, 11], '3-5': [0, 20, 60, 89, 51, 26, 18, 10], '1': [35, 241, 114, 41, 18, 8, 26, 16], '5-10': [0, 0, 5, 14, 16, 6, 10, 4]}, '苏州': {'1-3': [4, 63, 44, 32, 3, 0, 3, 15], '3-5': [1, 14, 30, 29, 13, 4, 2, 4], '1': [15, 118, 55, 18, 5, 1, 7, 18], '5-10': [0, 1, 6, 6, 5, 3, 2, 1]}}
var s_dct = a_salary['salary']
var cities = ['北京', '上海', '广州', '深圳', '杭州', '苏州', '西安', '成都', '天津', '南京']

function salaryline_data (dt) {
  var salaryline_data = []
  for (i in cities){
    var sl_dct = {
            type: 'line',
            label: {
              normal: {
                show: true,
                formatter: '{a}: {c}'
              }
            }
          }
    sl_dct['name'] = cities[i]
    // sl_dct['stack'] = '总量'
    var year_dct = dt[cities[i]]
    var sl_nums = [0,0,0,0,0,0,0,0]
    for (k in year_dct){
      var sl_lst = year_dct[k]
      for (j in sl_lst){
        sl_nums[j] = sl_nums[j] + sl_lst[j]
      }
    }
    sl_dct['data'] = sl_nums
    console.log(cities[i], sl_nums)
    salaryline_data.push(sl_dct)
  }

  return salaryline_data
}

var salaryline = echarts.init(document.getElementById('salary-line'));

var option = {
   title: {
        text: '各城市薪资分布图'
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:cities
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    toolbox: {
        feature: {
            saveAsImage: {}
        }
    },
    xAxis: {
        type: 'category',
        boundaryGap: false,
        data: ["5K-","5-10K","10-15K","15-20K","20-25K","25-30K",'30K+','面议']
    },
    yAxis: {
        type: 'value'
    },
    series: salaryline_data(s_dct)
}

salaryline.setOption(option)